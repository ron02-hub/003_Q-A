# mdファイル管理表

## 概要
本ドキュメントは、EV走行音アンケートアプリケーション開発プロジェクトにおける各種ドキュメント（mdファイル）、Pythonファイル（.py）、バッチファイル（.bat）の管理情報をまとめたものです。

---

## ドキュメント一覧

### 1. アンケート設計プロンプト.md

| 項目 | 内容 |
|------|------|
| **目的** | プロジェクトの全体像とアンケート設計のコンセプトを定義 |
| **概要** | EV走行音アンケートアプリ開発のための設計プロンプト。評価手法、フェーズ構成、質問設計などを詳細に記載 |
| **作成日** | 2026-01-08 |
| **更新日** | 2026-01-08 |
| **バージョン** | 1.0.0 |
| **ステータス** | 完成（ベース文書） |
| **備考** | 開発の起点となる仕様文書 |

---

### 2. 要件定義書.md

| 項目 | 内容 |
|------|------|
| **目的** | システムの機能要件・非機能要件を明確化 |
| **概要** | アンケートアプリケーションの要件を体系的に整理。機能要件（ユーザー認証、アンケート機能、メディア再生など）、非機能要件（パフォーマンス、セキュリティ、ユーザビリティ）を定義 |
| **作成日** | 2026-01-09 |
| **更新日** | 2026-01-09 |
| **バージョン** | 1.0.0 |
| **ステータス** | 完成 |
| **備考** | 開発の判断基準となる文書 |

---

### 3. 技術設計書.md

| 項目 | 内容 |
|------|------|
| **目的** | システムアーキテクチャと技術仕様を定義 |
| **概要** | Streamlitベースのシステム構成、モジュール設計（SessionManager、DataManager等）、データモデル、画面設計、エラーハンドリング、テスト設計を記載 |
| **作成日** | 2026-01-09 |
| **更新日** | 2026-01-09 |
| **バージョン** | 1.0.0 |
| **ステータス** | 完成 |
| **備考** | 実装時の参照文書 |

---

### 4. アンケート設計.md

| 項目 | 内容 |
|------|------|
| **目的** | アンケートの詳細設計を文書化 |
| **概要** | 各Step（Step1〜4）の質問設計、評価手法（SD法、トータル評価、ラダリング）の詳細、選択肢・回答形式を具体的に定義 |
| **作成日** | 2026-01-09 |
| **更新日** | 2026-01-12 |
| **バージョン** | 2.0.0 |
| **ステータス** | 完成（UI改善反映済み） |
| **備考** | UI実装時の参照文書。Phase4（RCT）削除、Step表記変更、ラダリング選択肢20個に拡張 |

---

### 5. タスク実装ステップ計画書.md

| 項目 | 内容 |
|------|------|
| **目的** | 開発タスクの詳細計画とスケジュール管理 |
| **概要** | Phase A〜Eの開発フェーズごとにタスクを分解。各タスクのステップ、完了条件、進捗状況を管理。チェックリスト、リスク管理、残課題も含む |
| **作成日** | 2026-01-09 |
| **更新日** | 2026-01-12 |
| **バージョン** | 2.1.0 |
| **ステータス** | 完成（全Phase完了、残課題あり） |
| **備考** | 開発進捗管理に使用。残課題：自動スクロールトップ機能（B案）未解決 |

---

### 6. mdファイル管理.md（本文書）

| 項目 | 内容 |
|------|------|
| **目的** | プロジェクトのドキュメント・コードファイル管理 |
| **概要** | 各mdファイル、Pythonファイル、バッチファイルの目的、概要、作成日、更新日等のメタ情報を一元管理 |
| **作成日** | 2026-01-09 |
| **更新日** | 2026-01-13 |
| **バージョン** | 2.2.1 |
| **ステータス** | 完成 |
| **備考** | **必須ルール**: md/py/batファイル作成・更新時は必ず本文書も更新すること |

---

### 7. README.md

| 項目 | 内容 |
|------|------|
| **目的** | アプリケーションの使用方法を説明 |
| **概要** | セットアップ手順、起動方法、ディレクトリ構成、アンケートの流れを記載 |
| **作成日** | 2026-01-09 |
| **更新日** | 2026-01-09 |
| **バージョン** | 1.0.0 |
| **ステータス** | 完成 |
| **備考** | ユーザー向けドキュメント |

---

### 8. テスト計画書.md

| 項目 | 内容 |
|------|------|
| **目的** | 100名分のサンプルデータ生成計画を定義 |
| **概要** | サンプルデータの設計（属性分布、評価分布）、データ生成仕様、生成アルゴリズム、検証項目を記載 |
| **作成日** | 2026-01-12 |
| **更新日** | 2026-01-12 |
| **バージョン** | 1.1.0 |
| **ステータス** | 完了（データ生成完了） |
| **備考** | サンプルデータ生成の設計文書。100名分データ生成完了 |

---

### 9. データ分析計画書.md

| 項目 | 内容 |
|------|------|
| **目的** | 100名分のサンプルデータからの分析計画を定義 |
| **概要** | 5層分析フレームワーク（記述統計、比較分析、相関分析、セグメント分析、統合インサイト）、可視化計画、出力レポート構成を記載。分析項目追加（因子分析、WTP分散分析、自由記述テーマ分析、ラダリングネットワーク分析、インタビューコンテンツ分析） | |
| **作成日** | 2026-01-12 |
| **更新日** | 2026-01-13 |
| **バージョン** | 2.0.1 |
| **ステータス** | 分析項目追加完了、可視化改善完了 |
| **備考** | データ分析の設計文書。分析項目追加、ラダリングネットワーク可視化追加（C07-2）、可視化改善（フォントサイズ調整、ノード・エッジサイズ可変化）、レポート更新 |

---

## Pythonファイル一覧

### メインアプリケーション

| ファイル名 | 目的 | 作成日 | 更新日 | バージョン | ステータス | 備考 |
|------------|------|--------|--------|-----------|----------|------|
| app.py | メインアプリケーションエントリーポイント | 2026-01-09 | 2026-01-12 | 1.1.0 | 完成 | ページルーティング、ヘッダー・フッター、自動スクロール機能 |
| config.py | 設定ファイル（パス、定数、SD軸等） | 2026-01-09 | 2026-01-12 | 1.1.1 | 完成 | 動画ファイル対応追加、SOUND_SAMPLES追加（分析用） |

### UIコンポーネント

| ファイル名 | 目的 | 作成日 | 更新日 | バージョン | ステータス | 備考 |
|------------|------|--------|--------|-----------|----------|------|
| components/survey_components.py | アンケートUIコンポーネント | 2026-01-09 | 2026-01-12 | 1.2.0 | 完成 | SD法スライダー、動画プレイヤー、ページトップボタン追加 |
| components/__init__.py | パッケージ初期化 | 2026-01-09 | 2026-01-09 | 1.0.0 | 完成 | - |

### ページモジュール

| ファイル名 | 目的 | 作成日 | 更新日 | バージョン | ステータス | 備考 |
|------------|------|--------|--------|-----------|----------|------|
| pages/phase1_introduction.py | Step1: 導入・属性収集 | 2026-01-09 | 2026-01-12 | 1.1.0 | 完成 | ページナンバリング追加 |
| pages/phase2_evaluation.py | Step2: SD法評価・トータル評価 | 2026-01-09 | 2026-01-12 | 1.2.0 | 完成 | 動画プレイヤー対応、前提条件画面追加 |
| pages/phase3_interview.py | Step3: 詳細調査 | 2026-01-09 | 2026-01-12 | 1.1.0 | 完成 | デプスインタビュー→詳細調査に名称変更 |
| pages/phase5_summary.py | Step4: まとめ・自由記述 | 2026-01-09 | 2026-01-12 | 1.1.0 | 完成 | Step4表記、走行音の重要性質問削除 |
| pages/__init__.py | パッケージ初期化 | 2026-01-09 | 2026-01-09 | 1.0.0 | 完成 | - |

### サービスモジュール

| ファイル名 | 目的 | 作成日 | 更新日 | バージョン | ステータス | 備考 |
|------------|------|--------|--------|-----------|----------|------|
| services/session_manager.py | セッション管理 | 2026-01-09 | 2026-01-12 | 1.1.0 | 完成 | 4フェーズ構成対応、進捗計算更新 |
| services/data_manager.py | データ管理（保存・エクスポート） | 2026-01-09 | 2026-01-09 | 1.0.0 | 完成 | JSON/CSV/Excel出力 |
| services/__init__.py | パッケージ初期化 | 2026-01-09 | 2026-01-09 | 1.0.0 | 完成 | - |

### ユーティリティスクリプト

| ファイル名 | 目的 | 作成日 | 更新日 | バージョン | ステータス | 備考 |
|------------|------|--------|--------|-----------|----------|------|
| scripts/generate_sample_data.py | サンプルデータ生成（100名分） | 2026-01-12 | 2026-01-12 | 1.0.0 | 完成 | テスト計画書に基づくデータ生成 |
| scripts/run_analysis.py | 統合分析スクリプト（Layer1-5） | 2026-01-12 | 2026-01-12 | 1.0.0 | 完成 | 記述統計、比較、相関、セグメント、統合インサイト分析 |
| scripts/visualization.py | 可視化生成（C01-C08） | 2026-01-12 | 2026-01-13 | 1.1.0 | 完成 | 8種類のチャート生成、seabornオプショナル対応、日本語フォント対応、ラダリングネットワーク分析改善（フォントサイズ調整、ノード・エッジサイズ可変化） |
| scripts/report_generator.py | HTMLレポート生成 | 2026-01-12 | 2026-01-12 | 1.0.1 | 完成 | 分析結果をHTML形式で出力、グラフの見方説明（小学生向け）追加 |

---

## バッチファイル一覧

| ファイル名 | 目的 | 作成日 | 更新日 | バージョン | ステータス | 備考 |
|------------|------|--------|--------|-----------|----------|------|
| start_app.bat | Streamlitアプリ起動 | 2026-01-09 | 2026-01-09 | 1.0.0 | 完成 | 自動ブラウザ起動対応 |
| generate_data.bat | サンプルデータ生成実行 | 2026-01-12 | 2026-01-12 | 1.0.0 | 完成 | generate_sample_data.py実行用 |
| git_commit.bat | ローカルGitコミット | 2026-01-12 | 2026-01-12 | 1.0.0 | 完成 | 変更をステージング・コミット |
| git_push.bat | GitHub Push | 2026-01-12 | 2026-01-12 | 1.0.0 | 完成 | リモートリポジトリへプッシュ |
| run_analysis.bat | データ分析統合実行 | 2026-01-12 | 2026-01-12 | 1.0.3 | 完成 | run_analysis.py, visualization.py, report_generator.pyを順次実行、仮想環境チェック追加、必要なライブラリのみ個別インストール（エラー無視） |

---

## ファイル構成図

```
003_アンケート設計/
├── app.py                       # メインアプリケーション（エントリーポイント）
├── config.py                    # 設定ファイル（パス、定数、SD軸等）
├── requirements.txt             # 依存パッケージ
├── README.md                    # 使用方法ドキュメント
├── start_app.bat                # アプリ起動スクリプト
├── generate_data.bat            # サンプルデータ生成スクリプト
├── git_commit.bat               # ローカルGitコミット用
├── git_push.bat                 # GitHub Push用スクリプト
├── run_analysis.bat             # データ分析統合実行
├── .gitignore                   # Git除外設定
├── .streamlit/config.toml       # Streamlit設定
├── components/                  # UIコンポーネント
│   ├── __init__.py
│   └── survey_components.py     # SD法スライダー、動画プレイヤー、ナビゲーション等
├── pages/                       # 各Stepのページ
│   ├── __init__.py
│   ├── phase1_introduction.py   # Step1: 導入・属性収集
│   ├── phase2_evaluation.py     # Step2: SD法評価・トータル評価
│   ├── phase3_interview.py      # Step3: 詳細調査
│   └── phase5_summary.py        # Step4: まとめ
├── services/                    # ビジネスロジック
│   ├── __init__.py
│   ├── session_manager.py       # セッション管理
│   └── data_manager.py         # データ保存・エクスポート
├── scripts/                     # ユーティリティスクリプト
│   ├── generate_sample_data.py  # サンプルデータ生成（100名分）
│   ├── run_analysis.py          # 統合分析スクリプト
│   ├── visualization.py         # 可視化生成
│   └── report_generator.py     # HTMLレポート生成
├── data/                        # データ保存（自動生成）
│   ├── responses/               # アンケート回答データ
│   ├── exports/                 # エクスポートデータ
│   └── sample_data/             # サンプルデータ（テスト用）
├── アンケート設計プロンプト.md   # 元の設計コンセプト文書
├── 技術設計書.md                # システムアーキテクチャ・技術仕様
├── アンケート設計.md            # アンケート詳細設計
├── タスク実装ステップ計画書.md  # 開発タスク・スケジュール
├── テスト計画書.md              # サンプルデータ生成計画
├── データ分析計画書.md          # データ分析計画
├── mdファイル管理.md            # 本文書（ドキュメント・コード管理）
└── 99_Material/                 # 素材ファイル
    ├── 00_Test/                 # テスト用音声
    ├── 01_sample_Movie/         # 走行音サンプル動画
    └── 01_sample_WAV/           # 走行音サンプル音声
```

---

## 更新ルール（必須）

### ⚠️ 重要: このルールはプロジェクトの必須ルールです

**mdファイル、pyファイル、batファイルを作成・更新した場合は、必ず本文書（mdファイル管理.md）も更新すること。**

### 詳細ルール

#### 1. 新規ファイル作成時（必須）

以下のいずれかのファイルを新規作成した場合、**即座に**本文書を更新すること：

- **mdファイル**: 「ドキュメント一覧」セクションに新規エントリを追加
- **pyファイル**: 「Pythonファイル一覧」の該当セクションに新規エントリを追加
- **batファイル**: 「バッチファイル一覧」に新規エントリを追加
- **ファイル構成図**: ディレクトリ構造に反映

**更新内容:**
- ファイル名、目的、作成日、バージョン（1.0.0）、ステータス（作成中/完成）を記載
- 更新履歴に記録

#### 2. 既存ファイル更新時（必須）

以下のいずれかのファイルを更新した場合、**即座に**本文書を更新すること：

- **mdファイル**: 該当エントリの「更新日」「バージョン」を更新
- **pyファイル**: 該当エントリの「更新日」「バージョン」「備考」を更新（変更内容を記載）
- **batファイル**: 該当エントリの「更新日」「バージョン」「備考」を更新

**更新内容:**
- 更新日を現在の日付に変更
- バージョンを適切に更新（X.Y.Z形式）
- 備考欄に変更内容を簡潔に記載
- 更新履歴に記録

#### 3. ファイル削除時（必須）

ファイルを削除した場合、**即座に**本文書を更新すること：

- 該当エントリのステータスを「廃止」に変更、またはエントリを削除
- ファイル構成図から削除
- 更新履歴に記録

#### 4. バージョン管理ルール

| 変更内容 | バージョン更新 | 例 |
|----------|---------------|------|
| 大幅な機能追加・設計変更 | X.0.0 → (X+1).0.0 | 1.0.0 → 2.0.0 |
| 機能追加・改善 | X.Y.0 → X.(Y+1).0 | 1.0.0 → 1.1.0 |
| バグ修正・軽微な修正 | X.Y.Z → X.Y.(Z+1) | 1.0.0 → 1.0.1 |

#### 5. チェックリスト（ファイル作成・更新時）

ファイルを作成・更新した際は、以下を確認：

- [ ] 本文書の該当セクションにエントリがあるか
- [ ] 作成日・更新日が正しいか
- [ ] バージョンが適切に更新されているか
- [ ] 備考欄に変更内容が記載されているか
- [ ] ファイル構成図が最新か
- [ ] 更新履歴に記録されているか

#### 6. 例外事項

以下のファイルは更新不要（自動生成ファイル）：
- `data/` 配下の自動生成ファイル
- `__pycache__/` 配下のファイル
- `.pyc` ファイル

---

### 違反時の対応

このルールに違反した場合（ファイルを作成・更新したのに本文書を更新しなかった場合）：
1. 後から気づいた時点で即座に更新する
2. 更新履歴に「遅延更新」として記録する
3. チーム内で共有し、再発防止を図る

---

## バージョン管理

| バージョン表記 | 意味 |
|---------------|------|
| X.0.0 | メジャーバージョン（大幅な変更） |
| X.Y.0 | マイナーバージョン（機能追加） |
| X.Y.Z | パッチバージョン（軽微な修正） |

---

## 更新履歴

| 日付 | バージョン | 更新内容 | 担当者 |
|------|-----------|----------|--------|
| 2026-01-09 | 1.0.0 | 初版作成 | AI Assistant |
| 2026-01-09 | 1.1.0 | README.md追加、ファイル構成図更新、進捗状況反映 | AI Assistant |
| 2026-01-09 | 1.2.0 | Phase D完了、動作確認テスト完了を反映 | AI Assistant |
| 2026-01-12 | 1.3.0 | Phase E完了、UI改善反映（Step表記変更、Phase4削除、ファイル構成図更新） | AI Assistant |
| 2026-01-12 | 1.4.0 | 残課題（自動スクロールトップ）追加、動画ファイル対応を反映 | AI Assistant |
| 2026-01-13 | 2.2.1 | visualization.py更新（ラダリングネットワーク分析改善：フォントサイズ調整、ノード・エッジサイズ可変化） | AI Assistant |
| 2026-01-13 | 2.2.0 | データ分析計画書更新（分析項目追加、バージョン2.0.0）、スクリプト更新（run_analysis.py、visualization.py、report_generator.pyにラダリングネットワーク分析追加） | AI Assistant |
| 2026-01-12 | 2.2.0 | Phase F完了反映、テスト計画書・データ分析計画書の進捗更新 | AI Assistant |
| 2026-01-12 | 2.1.0 | 更新ルールを必須ルールとして強化、分析スクリプト追加、チェックリスト追加 | AI Assistant |
| 2026-01-12 | 2.0.0 | Pythonファイル・バッチファイル管理セクション追加、ファイル一覧を完全管理 | AI Assistant |
| 2026-01-12 | 1.5.0 | テスト計画書.md、データ分析計画書.md追加、ファイル構成図更新 | AI Assistant |